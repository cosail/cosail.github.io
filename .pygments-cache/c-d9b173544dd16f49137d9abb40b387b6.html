<div class="highlight"><pre><span class="cm">/**</span>
<span class="cm"> * container_of - cast a member of a structure out to the containing structure</span>
<span class="cm"> * @ptr:	指向 member 的指针</span>
<span class="cm"> * @type:	 包含 member 的结构体的类型</span>
<span class="cm"> * @member:	成员变量名</span>
<span class="cm"> */</span>
<span class="cp">#define container_of(ptr, type, member) ({			\</span>
<span class="cp">	const typeof( ((type *)0)-&gt;member ) *__mptr = (ptr);	\</span>
<span class="cp">	(type *)( (char *)__mptr - offsetof(type,member) );})</span>
</pre></div>