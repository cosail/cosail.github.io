<div class="highlight"><pre><span class="cm">/**</span>
<span class="cm"> * container_of - cast a member of a structure out to the containing structure</span>
<span class="cm"> * @ptr:	the pointer to the member.</span>
<span class="cm"> * @type:	the type of the container struct this is embedded in.</span>
<span class="cm"> * @member:	the name of the member within the struct.</span>
<span class="cm"> */</span>
<span class="cp">#define container_of(ptr, type, member) ({			\</span>
<span class="cp">	const typeof( ((type *)0)-&gt;member ) *__mptr = (ptr);	\</span>
<span class="cp">	(type *)( (char *)__mptr - offsetof(type,member) );})</span>
</pre></div>