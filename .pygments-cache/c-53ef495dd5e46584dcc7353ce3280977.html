<div class="highlight"><pre><span class="cm">/*</span>
<span class="cm"> * container_of - 由指向结构体成员变量的指针转换为该结构体本身的指针。</span>
<span class="cm"> * @ptr:	指向 member 的指针</span>
<span class="cm"> * @type:   包含 member 的结构体的类型</span>
<span class="cm"> * @member:	成员变量名</span>
<span class="cm"> */</span>
<span class="cp">#define container_of(ptr, type, member) ({			\</span>
<span class="cp">	const typeof( ((type *)0)-&gt;member ) *__mptr = (ptr);	\</span>
<span class="cp">	(type *)( (char *)__mptr - offsetof(type,member) );})</span>
</pre></div>